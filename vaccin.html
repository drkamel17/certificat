<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SchÃ©ma de Rattrapage Vaccinal</title>
    <link rel="stylesheet" href="./styles/vaccin.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ©º SchÃ©ma de Rattrapage Vaccinal</h1>
            <p>Application web pour la gestion des schÃ©mas de rattrapage vaccinal chez l'enfant - Interface moderne et complÃ¨te par Dr DAOUDI</p>
            <div style="text-align: center; margin-top: 10px;">
                <a href="index.html" class="nav-button" style="display: inline-block; padding: 8px 16px; background-color: #1976d2; color: white; text-decoration: none; border-radius: 5px; font-size: 0.9em;">
                    <i class="fas fa-home"></i> Retour Ã  la page d'accueil
                </a>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="tabs">
            <button class="tab-button active" data-tab="patient">ğŸ‘¶ Informations Enfant</button>
            <button class="tab-button" data-tab="vaccinations">ğŸ’‰ Vaccinations</button>
            <button class="tab-button" data-tab="actions">âš™ï¸ Actions</button>
        </div>

        <!-- Patient Info Tab -->
        <div class="tab-content active" id="patient-tab">
            <div class="patient-info">
                <h2>ğŸ“‹ Informations de l'Enfant</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="patientName">Nom & PrÃ©nom de l'Enfant</label>
                        <input type="text" id="patientName" placeholder="Nom complet de l'enfant">
                    </div>
                    <div class="form-group">
                        <label for="birthDate">Date de Naissance</label>
                        <input type="text" id="birthDate" placeholder="dd/mm/yyyy" pattern="\d{2}/\d{2}/\d{4}">
                        <small id="patientAgeDisplay" style="display: none; color: #666; font-style: italic;"></small>
                    </div>
                    <div class="form-group">
                        <label for="consultationDate">Date de Consultation</label>
                        <input type="text" id="consultationDate" placeholder="dd/mm/yyyy" pattern="\d{2}/\d{2}/\d{4}">
                    </div>
                </div>

                <h3 style="margin-top: 20px;">âš ï¸ Conditions SpÃ©ciales</h3>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="premature">
                        <label for="premature">ğŸ‘¶ PrÃ©maturÃ© (< 37 semaines)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="lowWeight">
                        <label for="lowWeight">âš–ï¸ Poids < 2000g</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="hbPositiveMother">
                        <label for="hbPositiveMother">ğŸ©¸ MÃ¨re HBs positif</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vaccinations Tab -->
        <div class="tab-content" id="vaccinations-tab">
            <div class="vaccinations-layout">
                <div class="vaccinations-left">
                    <div class="vaccine-category">
                        <h3 class="category-title">ğŸ“‹ Naissance</h3>
                        <div class="vaccine-grid">
                            <div class="vaccine-field">
                                <span class="vaccine-name">ğŸ›¡ï¸ BCG</span>
                                <input type="text" class="vaccine-date" data-vaccine="BCG" data-comment="Vaccin contre la tuberculose. PremiÃ¨re dose recommandÃ©e dÃ¨s la naissance." placeholder="dd/mm/yyyy" pattern="\d{2}/\d{2}/\d{4}">
                            </div>
                            <div class="vaccine-field">
                                <span class="vaccine-name">ğŸ’‰ HÃ©patite B 1</span>
                                <input type="text" class="vaccine-date" data-vaccine="HepatiteB1" data-comment="ğŸ’¡ HÃ©patite B 1 - L'enfant doit avoir moins de 7 jours, ou bien il a un poids infÃ©rieur Ã  2000g, ou sa mÃ¨re est HBs positive et son Ã¢ge infÃ©rieur Ã  30 jours." placeholder="dd/mm/yyyy" pattern="\d{2}/\d{2}/\d{4}">
                            </div>
                        </div>
                    </div>

                    <div class="vaccine-category">
                        <h3 class="category-title">ğŸ“‹ Primo-vaccination</h3>
                        <div class="vaccine-grid">
                            <div class="vaccine-field">
                                <span class="vaccine-name">ğŸ”¬ DTCa-VPI-Hib-HBV 1</span>
                                <input type="text" class="vaccine-date" data-vaccine="DTCa1" data-comment="ğŸ’¡ DTCa-VPI-Hib-HBV 1 - Ã‚ge minimum 2 mois. Primo-vaccination hexavalente." placeholder="dd/mm/yyyy" pattern="\d{2}/\d{2}/\d{4}">
                            </div>
                            <div class="vaccine-field">
                                <span class="vaccine-name">ğŸ”¬ DTCa-VPI-Hib-HBV 2</span>
                                <input type="text" class="vaccine-date" data-vaccine="DTCa2" data-comment="ğŸ’¡ DTCa-VPI-Hib-HBV 2 - Ã‚ge minimum 4 mois. Intervalle minimum 6 semaines aprÃ¨s la 1Ã¨re dose." placeholder="dd/mm/yyyy" pattern="\d{2}/\d{2}/\d{4}">
                            </div>
                        </div>
                    </div>

                    <div class="vaccine-category">
                        <h3 class="category-title">ğŸ“‹ Rappel</h3>
                        <div class="vaccine-grid">
                            <div class="vaccine-field">
                                <span class="vaccine-name">ğŸ”¬ DTCa-VPI-Hib-HBV Rappel</span>
                                <input type="text" class="vaccine-date" data-vaccine="DTCaRappel" data-comment="ğŸ’¡ DTCa-VPI-Hib-HBV Rappel - Rappel Ã  partir de 12 mois. Intervalle minimum 6 mois aprÃ¨s la 2Ã¨me dose (minimum 4 mois)." placeholder="dd/mm/yyyy" pattern="\d{2}/\d{2}/\d{4}">
                            </div>
                        </div>
                    </div>

                    <div class="vaccine-category">
                        <h3 class="category-title">ğŸ“‹ Pneumocoque</h3>
                        <div class="vaccine-grid">
                            <div class="vaccine-field">
                                <span class="vaccine-name">ğŸ« VPC 13 - 1</span>
                                <input type="text" class="vaccine-date" data-vaccine="VPC1" data-comment="ğŸ’¡ VPC 13 - 1 - Ã‚ge minimum 2 mois. Rattrapage possible jusqu'Ã  2 ans." placeholder="dd/mm/yyyy" pattern="\d{2}/\d{2}/\d{4}">
                            </div>
                            <div class="vaccine-field">
                                <span class="vaccine-name">ğŸ« VPC 13 - 2</span>
                                <input type="text" class="vaccine-date" data-vaccine="VPC2" data-comment="ğŸ’¡ VPC 13 - 2 - Ã‚ge minimum 4 mois. Intervalle minimum 6 semaines aprÃ¨s la 1Ã¨re dose." placeholder="dd/mm/yyyy" pattern="\d{2}/\d{2}/\d{4}">
                            </div>
                            <div class="vaccine-field">
                                <span class="vaccine-name">ğŸ« VPC 13 - Rappel</span>
                                <input type="text" class="vaccine-date" data-vaccine="VPCRappel" data-comment="ğŸ’¡ VPC 13 - Rappel - Rappel Ã  partir de 12 mois. Intervalle minimum 6 mois aprÃ¨s la 2Ã¨me dose." placeholder="dd/mm/yyyy" pattern="\d{2}/\d{2}/\d{4}">
                            </div>
                        </div>
                    </div>

                    <div class="vaccine-category">
                        <h3 class="category-title">ğŸ“‹ Rougeole</h3>
                        <div class="vaccine-grid">
                            <div class="vaccine-field">
                                <span class="vaccine-name">ğŸ¦  ROR 1</span>
                                <input type="text" class="vaccine-date" data-vaccine="ROR1" data-comment="ğŸ’¡ ROR 1 - Ã‚ge minimum 11 mois (1Ã¨re dose)." placeholder="dd/mm/yyyy" pattern="\d{2}/\d{2}/\d{4}">
                            </div>
                            <div class="vaccine-field">
                                <span class="vaccine-name">ğŸ¦  ROR 2</span>
                                <input type="text" class="vaccine-date" data-vaccine="ROR2" data-comment="ğŸ’¡ ROR 2 - Ã‚ge minimum 18 mois. Intervalle minimum 1 mois aprÃ¨s ROR 1. La 2Ã¨me dose n'est pas un rappel." placeholder="dd/mm/yyyy" pattern="\d{2}/\d{2}/\d{4}">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="vaccinations-right">
                    <div class="messages-section">
                        <h3>ğŸ’¬ Messages et Aide</h3>
                        <div class="message-area" id="messageArea">
ğŸ¯ Application Web - Interface optimisÃ©e

ğŸ“ Instructions :
â€¢ Saisissez les dates de vaccination dans les champs correspondants
â€¢ Vert = Date valide selon les recommandations
â€¢ Rouge = Date invalide ou trop prÃ©coce
â€¢ Respectez les intervalles minimum entre doses

ğŸ’¡ Conseils :
â€¢ VÃ©rifiez la date de naissance avant de saisir
â€¢ Les conditions spÃ©ciales modifient les rÃ¨gles
â€¢ Consultez l'onglet Actions pour le statut global
                        </div>
                    </div>

                    <div class="quick-summary">
                        <h3>ğŸ“Š RÃ©sumÃ© Rapide</h3>
                        <div class="quick-stats">
                            <div class="quick-stat">
                                <span class="stat-icon">âœ…</span>
                                <span class="stat-label">Valides:</span>
                                <span class="stat-value" id="quickValidCount">0</span>
                            </div>
                            <div class="quick-stat">
                                <span class="stat-icon">âŒ</span>
                                <span class="stat-label">Invalides:</span>
                                <span class="stat-value" id="quickInvalidCount">0</span>
                            </div>
                            <div class="quick-stat">
                                <span class="stat-icon">â³</span>
                                <span class="stat-label">Manquants:</span>
                                <span class="stat-value" id="quickMissingCount">10</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Actions Tab -->
        <div class="tab-content" id="actions-tab">
            <div class="actions-section">
                <h2>âš™ï¸ Actions</h2>
                <div class="button-grid">
                    <button class="btn btn-secondary" id="btnReset">ğŸ”„ RÃ©initialiser</button>
                    <button class="btn btn-primary" id="btnSave">ğŸ’¾ Sauvegarder</button>
                    <button class="btn btn-secondary" id="btnLoad">ğŸ“‚ Charger</button>
                    <button class="btn btn-primary" id="btnReport">ğŸ“Š Rapport</button>
                    <button class="btn btn-accent" id="btnSchema">ğŸ¯ SchÃ©ma ProposÃ©</button>
                </div>
            </div>

            <div class="status-section">
                <h3>ğŸ“Š Statut de Vaccination</h3>
                <div class="status-summary">
                    <div class="status-item">
                        <span class="status-label">âœ… Vaccins Ã  jour:</span>
                        <span class="status-value" id="vaccinsAJour">0</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">â³ Vaccins en retard:</span>
                        <span class="status-value" id="vaccinsRetard">0</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">ğŸ“… Prochains vaccins:</span>
                        <span class="status-value" id="prochainsVaccins">-</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Report Modal -->
    <div class="modal" id="reportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“Š Rapport de Vaccination</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body" id="reportContent">
                <!-- Content will be generated dynamically -->
            </div>
        </div>
    </div>

    <!-- Schema Modal -->
    <div class="modal" id="schemaModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ¯ SchÃ©ma de Vaccination ProposÃ©</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body" id="schemaContent">
                <!-- Content will be generated dynamically -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="btnExportSchema">ğŸ’¾ Exporter</button>
                <button class="btn btn-secondary" id="btnPrintSchema">ğŸ–¨ï¸ Imprimer</button>
            </div>
        </div>
    </div>

    <footer>
        <p>ğŸ©º SchÃ©ma de Rattrapage Vaccinal pour l'Enfant - CrÃ©Ã© par Dr Daoudi | Application mÃ©dicale professionnelle</p>
    </footer>

    <script src="vaccin.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const dateInputs = document.querySelectorAll('#birthDate, #consultationDate, .vaccine-date');
            
            dateInputs.forEach(input => {
                input.addEventListener('input', function(e) {
                    let value = this.value.replace(/[^\d\/]/g, '');
                    
                    if (value.length === 2) {
                        value += '/';
                    } else if (value.length === 5) {
                        value += '/';
                    }
                    
                    this.value = value;
                });
                
                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Backspace') {
                        return;
                    }
                    
                    if (e.key.length === 1 && !/[0-9\/]/.test(e.key)) {
                        e.preventDefault();
                    }
                });
                
                input.addEventListener('blur', function(e) {
                    if (this.value && !/^\d{2}\/\d{2}\/\d{4}$/.test(this.value)) {
                        this.style.borderColor = '#dc3545';
                    } else {
                        this.style.borderColor = '#ddd';
                    }
                });
            });
        });
    </script>
</body>
</html>